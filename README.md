# 🍽️ E2E2-CATCHLINE
- - -

커널360 BE 2기 End to End 2팀 프로젝트입니다 ❕


## 🍎 프로젝트 소개


- 식당을 예약하고, 원격으로 줄을 설 수 있는 플랫폼입니다.
- 사용자는 원하는 지역의 식당을 조회하고, 다양한 기능을 제공받을 수 있습니다. 
- 마음에 드는 식당은 스크랩해서 조회할 수 있습니다.
- 사용자는 방문한 식당에 리뷰를 남길 수 있습니다.

<br>

## 🌟 기획 의도


- 해커톤보다 더 백엔드 아키텍처적으로 깊게 고민해보고 학습해보고자 합니다. 
- 동시성 문제를 경험하고 해결해보려고 합니다. 
- 비슷한 경험을 해볼 수 있는 서비스인 테이블링, 캐치테이블 앱을 참고하기로 했습니다.

<br>

## 👧 팀원 구성


<div align="center">

|                                                                                 **양상원**                                                                                 |                                                                             **이선우**                                                                              |                                                                               **박소은**                                                                               |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------:|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------:|
| [<img src="https://github.com/user-attachments/assets/7d1b1482-f0cb-466d-94eb-80aa9634ab31" height=160 width=150> <br/> @sangwonsheep](https://github.com/sangwonsheep) | [<img src="https://github.com/user-attachments/assets/e5ef938e-1337-4472-8c72-14b995e7e9f2" height=160 width=150> <br/> @I-migi](https://github.com/I-migi) | [<img src="https://github.com/user-attachments/assets/b2b6a8e1-8eaf-4ae0-a471-b83e2745a862" height=160 width=150> <br/> @soeunnPark](https://github.com/soeunnPark) |

</div>


<br>

## 🍳 기술 스택


### 1. Back-end

    - JAVA 17
    - Spring Boot 3.3.2
    - Spring Data JPA

### 2. Front-end

    - Thymeleaf
    - HTML
    - CSS : bootstrap

### 3. Database

    - MySQL 8


<br>


## ✴️ 채택한 개발 기술과 브랜치 전략


### Thymeleaf, bootstrap

- Thymeleaf
  - rest api로 개발이 가능하며, 웹 기반 언어인 `flutter`와 간단하게 서버 사이드 렌더링으로 구현 가능한 `Thymeleaf` 중에 고민했습니다.
  - 팀원들이 `javascript`를 학습하는데 시간이 많이 소요될 것 같았고, 앱으로 구현 시 세션 로그인 방식을 토큰으로 바로 변경해야 했습니다.
  - `Thymeleaf` 사용 시 프론트엔드보다 백엔드 로직에 집중할 수 있을 것 같아 최종적으로 결정했습니다.

- bootstrap
  - 오픈소스 프론트엔드 프레임워크 선택했습니다.
  - CSS + JavaScript

### 브랜치 전략

- 먼저, 각자 fork 한 리포지토리를 삭제했습니다. 멘토링 과정에서 fork 하지 않고 브랜치 전략만 잘 수립해서 개발하기로 결정했습니다.


- Git-flow 전략을 기반으로 main, develop 브랜치와 feature 보조 브랜치를 운용했습니다. 
- main, develop, feature 브랜치로 나누어 개발을 했습니다.

  - main 브랜치는 배포 단계에서만 사용하는 브랜치입니다. 
  - develop 브랜치는 개발 단계에서 git-flow의 master 역할을 하는 브랜치입니다.
  - feature 브랜치는 기능 단위로 독립적인 개발 환경을 위하여 사용하고 merge 후 각 브랜치를 삭제해주었습니다. 





<br>


## 📗 프로젝트 구조


```
src
└── main
    └── java
        └── catch_line
            ├── commmon
            │   └── constant
            ├── config
            ├── exception
            │   ├── email
            │   ├── password
            │   ├── phone
            │   └── session
            ├── history
            ├── member
            │   ├── controller
            │   ├── model
            │   ├── repository
            │   ├── service
            │   └── validate
            ├── menu
            ├── notification
            ├── reservation
            ├── restaurant
            ├── review
            └── waiting

```

- 도메인 계층 구조를 사용했습니다.


<br>


## 👯‍ 역할 분담

 

### 🐑 양상원
- 기능

   - 식당, 리뷰, 메뉴, 영업시간

### 🍗 이선우
- 기능

   - 웨이팅, 예약, 페이지네이션


### 🍒 박소은

- 기능

   - 회원가입, 로그인, 페이지네이션, 스크랩


<br>


## ⏰ 개발 기간 및 작업 관리


### 개발 기간

- 전체 개발 기간 : 2024-07-29 ~ 2024-08-30

### 작업 관리

- GitHub Projects와 Issues를 사용하여 진행 상황을 공유했습니다.
- 개발 중 팀원들과 논의할 사항들을 GitHub Discussions에 등록했습니다.
- Github Wiki를 사용하여 개발 중 공부한 내용을 문서로 작성했습니다.
- 매일 스크럼을 통해 개발 방향성에 대한 고민을 나누고 Notion에 회의 내용을 기록했습니다.




<br>

## 🧚 기능 구현

### 1. 🍽️ 식당

#### [식당 상세 정보]
- 로그인하지 않아도 식당 상세 정보에 접근이 가능합니다.
- 식당 제목, 소개글, 식당 평점, 리뷰 수, 영업 시간을 보여줍니다.
- 식당 평점과 리뷰 수는 실제 DB에 있는 리뷰 점수 평균과 식당에 해당하는 리뷰 수입니다.
- 영업 시간은 오늘 날짜를 기준으로 보여줍니다.
- 식당 메뉴와 전체 리뷰에 대한 정보를 해당 페이지에서 조회할 수 있습니다.

#### [메뉴]
- 식당에 대한 전체 메뉴 리스트를 보여줍니다.

#### [리뷰]
- 식당에 대한 전체 리뷰 리스트와 리뷰 평점을 보여줍니다.


### 2. 🏠 메인 화면

#### [식당 프리뷰]
- 메인 화면에서 식당을 리뷰가 많은 순, 평가가 높은 순, 스크랩 많은 순으로 정렬할 수 있습니다.
- 페이지네이션 기능을 추가했습니다.


### 3. 🕒 예약 및 웨이팅

#### [예약 및 웨이팅 기능]
- 사용자가 예약 시 등록 시간의 다음 날부터 일주일 후까지만 예약할 수 있으며, 다른 날짜는 선택 불가능합니다.
- 로그인 없이 예약 및 웨이팅 등록 시 예외가 발생합니다.
- 사용자가 본인의 예약과 웨이팅 목록을 조회할 수 있습니다.
- 예약 시, 그 날 몇 번째 예약인지 나타내는 기능을 구현했습니다.
- 유저의 개인 예약 및 웨이팅들을 조회할 수 있습니다.



### 4. 🙋‍ 회원 기능

#### [로그인 `AuthController`]

- 이메일, 비밀번호, 유저 역할(USER, OWNER)을 입력하여 로그인합니다.

#### [회원가입 `AuthController`]

- 동일한 이메일로는 가입이 어렵습니다.
- 비밀번호는 검증 이후 암호화하여 DB에 저장됩니다.

#### [로그아웃 `AuthController`]

- 세션을 만료시켜 로그아웃합니다.

#### [프로필 조회 `MemberController`]

- 세션에서 유저 ID를 꺼내 프로필을 조회합니다.

#### [프로필 수정 `MemberController`]

- 이메일 수정 시 중복 이메일 검사를 다시 수행합니다.

#### [회원 탈퇴 `MemberController`]

- 회원 탈퇴 시, 회원 상태를 탈퇴 상태로 변경합니다.
- DB에서 영구적으로 삭제하지 않습니다.
- 탈퇴 후 같은 이메일로 재가입이 가능하도록 `email` 칼럼의 `unique` 제약 조건을 해제했습니다.

#### [스크랩]

- 사용자는 마음에 드는 식당을 스크랩할 수 있습니다.
- 스크랩 수 확인 필요 ...



<br>



## 🔧 남은 기간 . . .



- 테스트 코드

   - 현재 통합 테스트 코드만 작성한 상태입니다. ➡️ 단위 테스트로 변경


- 지도 API

  - 카카오 지도 API에서 식당 정보를 불러오려고 합니다. 이때, 식당 이름, 위치, 영업시간, 전화번호 등의 정보를 불러와야 합니다.
  - 지금은 db에 식당에 대한 정보들이 임의로 저장되어 있습니다.

  
- OAuth

   - 지금은 학습 목적으로 세션 로그인 방식으로 개발했습니다.
   - 남은 기간 동안 `OAuth`로 변경하려고 합니다. 

   
- 로그인, 로그아웃 상태에서 사용할 수 있는 기능 구분 (`filter`, `interceptor`)



- 사장님, 관리자 구현 (`일반 사용자`, `사장님`, `관리자`으로 level 구분)


- 이미지 업로드
   
   - 사장님이 식당을 등록할 때 이미지를 업로드할 수 있습니다.
   - 사장님이 등록한 식당 이미지를 식당 상세 조회 화면에서 사용자가 조회할 수 있습니다. 

   
- 동시성 경험

  - 서비스에 대한 통합 테스트를 만들어 `java.util.concurrent` 패키지를 사용해보기로 했습니다.
  - 해당 패키지에는 `Semaphore` 및 `CountDownLatch`와 같은 여러 동기화 장치가 포함되어 있다.
    - 동시성을 경험해보고, 이를 제어하는 코드가 어디에 있는지 찾아보는 것도 좋을 것 같습니다.

  - 실시간으로 DB에서 리뷰 데이터를 업데이트하는 방식에서 특정 시간마다 업데이트하는 방식으로 변경할 예정입니다. ➡️ 배치 처리 혹은 Redis


## 기능 명세서

https://www.notion.so/1bf8cb5517d2472ba5707ace267e778b

## API 명세서

https://www.notion.so/API-fd90ef95833046b491d87f67da412cfd
